spring.application.name=${SPRING_APPLICATION_NAME:golemcore-bot}

# ===== AGENT =====
bot.agent.max-iterations=${BOT_AGENT_MAX_ITERATIONS:20}

# ===== LLM =====
bot.llm.provider=${BOT_LLM_PROVIDER:langchain4j}
# langchain4j providers (each with api-key and optional base-url)
bot.llm.langchain4j.providers.openai.api-key=${OPENAI_API_KEY:}
bot.llm.langchain4j.providers.anthropic.api-key=${ANTHROPIC_API_KEY:}
# Custom LLM (if provider=custom)
bot.llm.custom.api-url=${CUSTOM_LLM_API_URL:http://localhost:8080/v1}
bot.llm.custom.api-key=${CUSTOM_LLM_API_KEY:}

# Model configurations are in models.json (working directory)

# ===== CHANNELS =====
# Telegram
bot.channels.telegram.enabled=${TELEGRAM_ENABLED:false}
bot.channels.telegram.token=${TELEGRAM_BOT_TOKEN:}
bot.channels.telegram.allow-from=${TELEGRAM_ALLOWED_USERS:}

# ===== STORAGE (Local Workspace) =====
bot.storage.local.base-path=${STORAGE_PATH:${user.home}/.golemcore-bot/workspace}
# Directories
bot.storage.directories.sessions=${BOT_STORAGE_DIRECTORIES_SESSIONS:sessions}
bot.storage.directories.memory=${BOT_STORAGE_DIRECTORIES_MEMORY:memory}
bot.storage.directories.skills=${BOT_STORAGE_DIRECTORIES_SKILLS:skills}
bot.storage.directories.preferences=${BOT_STORAGE_DIRECTORIES_PREFERENCES:preferences}

# ===== MEMORY =====
bot.memory.enabled=${BOT_MEMORY_ENABLED:true}
bot.memory.directory=${BOT_MEMORY_DIRECTORY:memory}
bot.memory.recent-days=${BOT_MEMORY_RECENT_DAYS:7}

# ===== SKILLS =====
bot.skills.enabled=${BOT_SKILLS_ENABLED:true}
bot.skills.directory=${BOT_SKILLS_DIRECTORY:skills}
bot.skills.workspace-path=${BOT_SKILLS_WORKSPACE_PATH:workspace/skills}
bot.skills.builtin-path=${BOT_SKILLS_BUILTIN_PATH:classpath:skills/}
bot.skills.progressive-loading=${BOT_SKILLS_PROGRESSIVE_LOADING:true}

# ===== SECURITY =====
bot.security.sanitize-input=${BOT_SECURITY_SANITIZE_INPUT:true}
bot.security.detect-prompt-injection=${BOT_SECURITY_DETECT_PROMPT_INJECTION:true}
bot.security.detect-command-injection=${BOT_SECURITY_DETECT_COMMAND_INJECTION:true}
bot.security.max-input-length=${BOT_SECURITY_MAX_INPUT_LENGTH:10000}
bot.security.allowlist.enabled=${BOT_SECURITY_ALLOWLIST_ENABLED:false}
# Tool confirmation (asks user before destructive actions)
bot.security.tool-confirmation.enabled=${TOOL_CONFIRMATION_ENABLED:true}
bot.security.tool-confirmation.timeout-seconds=${TOOL_CONFIRMATION_TIMEOUT:60}

# ===== BROWSER (Headless) =====
bot.browser.enabled=${BROWSER_ENABLED:true}
bot.browser.type=${BROWSER_TYPE:playwright}
bot.browser.headless=${BROWSER_HEADLESS:true}
bot.browser.timeout=${BROWSER_TIMEOUT:30000}
bot.browser.user-agent=${BROWSER_USERAGENT:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36}

# ===== HTTP CLIENT (Feign + OkHttp) =====
bot.http.connect-timeout=${BOT_HTTP_CONNECT_TIMEOUT:10000}
bot.http.read-timeout=${BOT_HTTP_READ_TIMEOUT:60000}
bot.http.write-timeout=${BOT_HTTP_WRITE_TIMEOUT:60000}
bot.http.max-idle-connections=${BOT_HTTP_MAX_IDLE_CONNECTIONS:5}
bot.http.keep-alive-duration=${BOT_HTTP_KEEP_ALIVE_DURATION:300000}

# ===== STREAMING =====
bot.streaming.enabled=${BOT_STREAMING_ENABLED:true}
bot.streaming.chunk-delay-ms=${BOT_STREAMING_CHUNK_DELAY_MS:50}
bot.streaming.typing-indicator=${BOT_STREAMING_TYPING_INDICATOR:true}

# ===== RATE LIMITING (Custom Token Bucket) =====
bot.rate-limit.enabled=${BOT_RATE_LIMIT_ENABLED:true}
# Per user
bot.rate-limit.user.requests-per-minute=${BOT_RATE_LIMIT_USER_REQUESTS_PER_MINUTE:20}
bot.rate-limit.user.requests-per-hour=${BOT_RATE_LIMIT_USER_REQUESTS_PER_HOUR:100}
bot.rate-limit.user.requests-per-day=${BOT_RATE_LIMIT_USER_REQUESTS_PER_DAY:500}
# Per channel (Telegram limits)
bot.rate-limit.channel.messages-per-second=${BOT_RATE_LIMIT_CHANNEL_MESSAGES_PER_SECOND:30}
# Per LLM provider
bot.rate-limit.llm.requests-per-minute=${BOT_RATE_LIMIT_LLM_REQUESTS_PER_MINUTE:60}

# ===== LLM USAGE TRACKING (quantitative only) =====
bot.usage.enabled=${BOT_USAGE_ENABLED:true}
bot.usage.directory=${BOT_USAGE_DIRECTORY:usage}
bot.usage.export-interval=${BOT_USAGE_EXPORT_INTERVAL:PT1H}

# ===== MODEL ROUTER (smart model selection) =====
# Temperature for models that support it (ignored for reasoning models like gpt-5.1)
bot.router.temperature=${BOT_ROUTER_TEMPERATURE:0.7}
#
# Model tiers - selected by SkillRoutingSystem based on task complexity:
#   fast   - Simple tasks: greetings, short answers, translations, quick lookups
#   default- Standard tasks: general questions, summarization, basic coding
#   smart  - Complex tasks: architecture decisions, deep analysis, multi-step reasoning
#
# Reasoning effort (low/medium/high) - required for gpt-5.1, controls thinking depth
#
bot.router.fast-model=${BOT_ROUTER_FAST_MODEL:openai/gpt-5.1}
bot.router.fast-model-reasoning=${BOT_ROUTER_FAST_MODEL_REASONING:low}
bot.router.default-model=${BOT_ROUTER_DEFAULT_MODEL:openai/gpt-5.1}
bot.router.default-model-reasoning=${BOT_ROUTER_DEFAULT_MODEL_REASONING:medium}
bot.router.smart-model=${BOT_ROUTER_SMART_MODEL:openai/gpt-5.1}
bot.router.smart-model-reasoning=${BOT_ROUTER_SMART_MODEL_REASONING:high}
# Coding tasks: code generation, debugging, refactoring, code review
bot.router.coding-model=${BOT_ROUTER_CODING_MODEL:openai/gpt-5.2}
bot.router.coding-model-reasoning=${BOT_ROUTER_CODING_MODEL_REASONING:medium}
# Dynamically upgrade model tier to "coding" when coding activity detected mid-conversation
bot.router.dynamic-tier-enabled=${BOT_ROUTER_DYNAMIC_TIER_ENABLED:true}

# ===== SKILL MATCHER (semantic search + LLM classifier) =====
bot.router.skill-matcher.enabled=${SKILL_MATCHER_ENABLED:false}
# Embeddings for semantic search
bot.router.skill-matcher.embedding.provider=${BOT_ROUTER_SKILL_MATCHER_EMBEDDING_PROVIDER:openai}
bot.router.skill-matcher.embedding.model=${BOT_ROUTER_SKILL_MATCHER_EMBEDDING_MODEL:text-embedding-3-small}
bot.router.skill-matcher.embedding.dimension=${BOT_ROUTER_SKILL_MATCHER_EMBEDDING_DIMENSION:1536}
# Semantic search thresholds
bot.router.skill-matcher.semantic-search.top-k=${BOT_ROUTER_SKILL_MATCHER_SEMANTIC_SEARCH_TOP_K:5}
bot.router.skill-matcher.semantic-search.min-score=${BOT_ROUTER_SKILL_MATCHER_SEMANTIC_SEARCH_MIN_SCORE:0.6}
# LLM classifier (uses fast model tier)
bot.router.skill-matcher.classifier.enabled=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_ENABLED:true}
bot.router.skill-matcher.classifier.model=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_MODEL:openai/gpt-5-mini}
bot.router.skill-matcher.classifier.model-reasoning=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_MODEL_REASONING:low}
bot.router.skill-matcher.classifier.temperature=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_TEMPERATURE:0.1}
bot.router.skill-matcher.classifier.max-tokens=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_MAX_TOKENS:200}
bot.router.skill-matcher.classifier.timeout-ms=${BOT_ROUTER_SKILL_MATCHER_CLASSIFIER_TIMEOUT_MS:10000}
# Skip LLM classifier if semantic score above threshold
bot.router.skill-matcher.skip-classifier-threshold=${BOT_ROUTER_SKILL_MATCHER_SKIP_CLASSIFIER_THRESHOLD:0.95}
bot.router.skill-matcher.min-semantic-score=${BOT_ROUTER_SKILL_MATCHER_MIN_SEMANTIC_SCORE:0.6}
# Overall routing timeout (must be > classifier + embedding time)
bot.router.skill-matcher.routing-timeout-ms=${BOT_ROUTER_SKILL_MATCHER_ROUTING_TIMEOUT_MS:15000}
# Cache
bot.router.skill-matcher.cache.enabled=${BOT_ROUTER_SKILL_MATCHER_CACHE_ENABLED:true}
bot.router.skill-matcher.cache.ttl-minutes=${BOT_ROUTER_SKILL_MATCHER_CACHE_TTL_MINUTES:60}
bot.router.skill-matcher.cache.max-size=${BOT_ROUTER_SKILL_MATCHER_CACHE_MAX_SIZE:1000}

# ===== TOOLS (Filesystem & Shell) =====
# FileSystem tool - file operations in sandboxed workspace
bot.tools.filesystem.enabled=${FILESYSTEM_TOOL_ENABLED:true}
bot.tools.filesystem.workspace=${TOOLS_WORKSPACE:${user.home}/.golemcore-bot/sandbox}
# Shell tool - command execution in sandboxed workspace
bot.tools.shell.enabled=${SHELL_TOOL_ENABLED:true}
bot.tools.shell.workspace=${TOOLS_WORKSPACE:${user.home}/.golemcore-bot/sandbox}
bot.tools.shell.default-timeout=${SHELL_DEFAULT_TIMEOUT:30}
bot.tools.shell.max-timeout=${SHELL_MAX_TIMEOUT:300}
# Skill management tool - create/list/delete skills via LLM
bot.tools.skill-management.enabled=${SKILL_MANAGEMENT_TOOL_ENABLED:true}
# Skill transition tool - allows LLM to transition between skills in a pipeline
bot.tools.skill-transition.enabled=${SKILL_TRANSITION_TOOL_ENABLED:true}
# Brave Search tool - web search via Brave Search API (free: 2000 queries/month)
bot.tools.brave-search.enabled=${BRAVE_SEARCH_ENABLED:false}
bot.tools.brave-search.api-key=${BRAVE_SEARCH_API_KEY:}
bot.tools.brave-search.default-count=${BRAVE_SEARCH_DEFAULT_COUNT:5}

# ===== MCP CLIENT (Model Context Protocol) =====
bot.mcp.enabled=${MCP_ENABLED:true}
bot.mcp.default-startup-timeout=${BOT_MCP_DEFAULT_STARTUP_TIMEOUT:30}
bot.mcp.default-idle-timeout=${BOT_MCP_DEFAULT_IDLE_TIMEOUT:5}

# ===== RAG (LightRAG) =====
bot.rag.enabled=${RAG_ENABLED:false}
bot.rag.url=${RAG_URL:http://localhost:9621}
bot.rag.api-key=${RAG_API_KEY:}
bot.rag.query-mode=${BOT_RAG_QUERY_MODE:hybrid}
bot.rag.max-context-tokens=${BOT_RAG_MAX_CONTEXT_TOKENS:2000}
bot.rag.timeout-seconds=${BOT_RAG_TIMEOUT_SECONDS:10}
bot.rag.index-min-length=${BOT_RAG_INDEX_MIN_LENGTH:50}

# ===== AUTO MODE =====
bot.auto.enabled=${AUTO_MODE_ENABLED:false}
bot.auto.interval-minutes=${AUTO_MODE_INTERVAL:15}
bot.auto.max-goals=${BOT_AUTO_MAX_GOALS:3}
bot.auto.model-tier=${BOT_AUTO_MODEL_TIER:default}
bot.auto.notify-milestones=${BOT_AUTO_NOTIFY_MILESTONES:true}
bot.auto.max-diary-entries-in-context=${BOT_AUTO_MAX_DIARY_ENTRIES_IN_CONTEXT:10}
bot.auto.max-tasks-per-goal=${BOT_AUTO_MAX_TASKS_PER_GOAL:20}
# Goal management tool
bot.tools.goal-management.enabled=${GOAL_MANAGEMENT_TOOL_ENABLED:true}

# ===== AUTO COMPACT (automatic context compaction) =====
bot.auto-compact.enabled=${BOT_AUTO_COMPACT_ENABLED:true}
bot.auto-compact.max-context-tokens=${BOT_AUTO_COMPACT_MAX_CONTEXT_TOKENS:50000}
bot.auto-compact.keep-last-messages=${BOT_AUTO_COMPACT_KEEP_LAST_MESSAGES:20}
bot.auto-compact.system-prompt-overhead-tokens=${BOT_AUTO_COMPACT_SYSTEM_PROMPT_OVERHEAD_TOKENS:8000}
bot.auto-compact.chars-per-token=${BOT_AUTO_COMPACT_CHARS_PER_TOKEN:3.5}
bot.auto-compact.max-tool-result-chars=${BOT_AUTO_COMPACT_MAX_TOOL_RESULT_CHARS:100000}

# ===== PROMPTS (system prompt sections) =====
bot.prompts.enabled=${BOT_PROMPTS_ENABLED:true}
bot.prompts.bot-name=${BOT_NAME:AI Assistant}

# ===== VOICE =====
bot.voice.enabled=${VOICE_ENABLED:false}
bot.voice.stt.provider=${BOT_VOICE_STT_PROVIDER:whisper}
bot.voice.stt.model=${BOT_VOICE_STT_MODEL:whisper-1}
bot.voice.stt.language=${BOT_VOICE_STT_LANGUAGE:auto}
bot.voice.tts.provider=${BOT_VOICE_TTS_PROVIDER:elevenlabs}
bot.voice.tts.voice-id=${BOT_VOICE_TTS_VOICE_ID:21m00Tcm4TlvDq8ikWAM}
bot.voice.tts.speed=${BOT_VOICE_TTS_SPEED:1.0}
bot.voice.output-format=${BOT_VOICE_OUTPUT_FORMAT:OGG_OPUS}
# Telegram voice
bot.voice.telegram.respond-with-voice=${BOT_VOICE_TELEGRAM_RESPOND_WITH_VOICE:false}
bot.voice.telegram.transcribe-incoming=${BOT_VOICE_TELEGRAM_TRANSCRIBE_INCOMING:false}
