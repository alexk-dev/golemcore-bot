spring.application.name=${SPRING_APPLICATION_NAME:golemcore-bot}

# ===== AGENT =====
bot.agent.max-iterations=${BOT_AGENT_MAX_ITERATIONS:20}

# ===== LLM =====
bot.llm.provider=${BOT_LLM_PROVIDER:langchain4j}
# langchain4j providers (each with api-key and optional base-url)
bot.llm.langchain4j.providers.openai.api-key=${OPENAI_API_KEY:}
bot.llm.langchain4j.providers.anthropic.api-key=${ANTHROPIC_API_KEY:}
bot.llm.langchain4j.timeout-ms=${BOT_LLM_LANGCHAIN4J_TIMEOUT_MS:300000}
# Custom LLM (if provider=custom)

# Model configurations are in models.json (working directory)

# ===== CHANNELS =====
# Telegram
bot.channels.telegram.enabled=${TELEGRAM_ENABLED:false}
bot.channels.telegram.token=${TELEGRAM_BOT_TOKEN:}
bot.channels.telegram.allow-from=${TELEGRAM_ALLOWED_USERS:}

# ===== STORAGE (Local Workspace) =====
bot.storage.local.base-path=${STORAGE_PATH:${user.home}/.golemcore/workspace}
# Directories
bot.storage.directories.sessions=${BOT_STORAGE_DIRECTORIES_SESSIONS:sessions}
bot.storage.directories.memory=${BOT_STORAGE_DIRECTORIES_MEMORY:memory}
bot.storage.directories.skills=${BOT_STORAGE_DIRECTORIES_SKILLS:skills}
bot.storage.directories.preferences=${BOT_STORAGE_DIRECTORIES_PREFERENCES:preferences}

# ===== MEMORY =====
bot.memory.enabled=${BOT_MEMORY_ENABLED:true}
bot.memory.directory=${BOT_MEMORY_DIRECTORY:memory}
bot.memory.recent-days=${BOT_MEMORY_RECENT_DAYS:7}

# ===== SKILLS =====
bot.skills.enabled=${BOT_SKILLS_ENABLED:true}
bot.skills.directory=${BOT_SKILLS_DIRECTORY:skills}
bot.skills.workspace-path=${BOT_SKILLS_WORKSPACE_PATH:workspace/skills}
bot.skills.builtin-path=${BOT_SKILLS_BUILTIN_PATH:classpath:skills/}
bot.skills.progressive-loading=${BOT_SKILLS_PROGRESSIVE_LOADING:true}

# ===== SECURITY =====
bot.security.sanitize-input=${BOT_SECURITY_SANITIZE_INPUT:true}
bot.security.detect-prompt-injection=${BOT_SECURITY_DETECT_PROMPT_INJECTION:true}
bot.security.detect-command-injection=${BOT_SECURITY_DETECT_COMMAND_INJECTION:true}
bot.security.max-input-length=${BOT_SECURITY_MAX_INPUT_LENGTH:10000}
# Note: allowlist is enforced automatically when bot.channels.*.allow-from is non-empty
# Tool confirmation (asks user before destructive actions)
bot.security.tool-confirmation.enabled=${TOOL_CONFIRMATION_ENABLED:true}
bot.security.tool-confirmation.timeout-seconds=${TOOL_CONFIRMATION_TIMEOUT:60}

# ===== BROWSER (Headless) =====
bot.browser.enabled=${BROWSER_ENABLED:true}
bot.browser.type=${BROWSER_TYPE:playwright}
bot.browser.headless=${BROWSER_HEADLESS:true}
bot.browser.timeout=${BROWSER_TIMEOUT:30000}
bot.browser.user-agent=${BROWSER_USERAGENT:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36}

# ===== HTTP CLIENT (Feign + OkHttp) =====
bot.http.connect-timeout=${BOT_HTTP_CONNECT_TIMEOUT:10000}
bot.http.read-timeout=${BOT_HTTP_READ_TIMEOUT:60000}
bot.http.write-timeout=${BOT_HTTP_WRITE_TIMEOUT:60000}
bot.http.max-idle-connections=${BOT_HTTP_MAX_IDLE_CONNECTIONS:5}
bot.http.keep-alive-duration=${BOT_HTTP_KEEP_ALIVE_DURATION:300000}

# ===== STREAMING =====
bot.streaming.enabled=${BOT_STREAMING_ENABLED:true}
bot.streaming.chunk-delay-ms=${BOT_STREAMING_CHUNK_DELAY_MS:50}
bot.streaming.typing-indicator=${BOT_STREAMING_TYPING_INDICATOR:true}

# ===== RATE LIMITING (Custom Token Bucket) =====
bot.rate-limit.enabled=${BOT_RATE_LIMIT_ENABLED:true}
# Per user
bot.rate-limit.user.requests-per-minute=${BOT_RATE_LIMIT_USER_REQUESTS_PER_MINUTE:20}
bot.rate-limit.user.requests-per-hour=${BOT_RATE_LIMIT_USER_REQUESTS_PER_HOUR:100}
bot.rate-limit.user.requests-per-day=${BOT_RATE_LIMIT_USER_REQUESTS_PER_DAY:500}
# Per channel (Telegram limits)
bot.rate-limit.channel.messages-per-second=${BOT_RATE_LIMIT_CHANNEL_MESSAGES_PER_SECOND:30}
# Per LLM provider
bot.rate-limit.llm.requests-per-minute=${BOT_RATE_LIMIT_LLM_REQUESTS_PER_MINUTE:60}

# ===== LLM USAGE TRACKING (quantitative only) =====
bot.usage.enabled=${BOT_USAGE_ENABLED:true}
bot.usage.directory=${BOT_USAGE_DIRECTORY:usage}
bot.usage.export-interval=${BOT_USAGE_EXPORT_INTERVAL:PT1H}

# ===== MODEL ROUTER (model tier selection) =====
# Temperature for models that support it (ignored for reasoning models like gpt-5.1)
bot.router.temperature=${BOT_ROUTER_TEMPERATURE:0.7}
#
# Model tiers:
#   balanced - Standard tasks: greetings, general questions, summarization, basic coding (default/fallback)
#   smart    - Complex tasks: architecture decisions, analysis, multi-step reasoning
#   coding   - Programming tasks: code generation, debugging, refactoring, code review
#   deep     - PhD-level reasoning: mathematical proofs, scientific analysis, deep calculations
#
# Reasoning effort (low/medium/high) - required for gpt-5.1, controls thinking depth
#
bot.router.balanced-model=${BOT_ROUTER_BALANCED_MODEL:openai/gpt-5.1}
bot.router.balanced-model-reasoning=${BOT_ROUTER_BALANCED_MODEL_REASONING:medium}
bot.router.smart-model=${BOT_ROUTER_SMART_MODEL:openai/gpt-5.1}
bot.router.smart-model-reasoning=${BOT_ROUTER_SMART_MODEL_REASONING:high}
# Coding tasks: code generation, debugging, refactoring, code review
bot.router.coding-model=${BOT_ROUTER_CODING_MODEL:openai/gpt-5.2}
bot.router.coding-model-reasoning=${BOT_ROUTER_CODING_MODEL_REASONING:medium}
# PhD-level reasoning: proofs, scientific analysis, deep calculations
bot.router.deep-model=${BOT_ROUTER_DEEP_MODEL:openai/gpt-5.2}
bot.router.deep-model-reasoning=${BOT_ROUTER_DEEP_MODEL_REASONING:xhigh}
# Dynamically upgrade model tier to "coding" when coding activity detected mid-conversation
bot.router.dynamic-tier-enabled=${BOT_ROUTER_DYNAMIC_TIER_ENABLED:true}

# ===== TOOLS (Filesystem & Shell) =====
# FileSystem tool - file operations in sandboxed workspace
bot.tools.filesystem.enabled=${FILESYSTEM_TOOL_ENABLED:true}
bot.tools.filesystem.workspace=${TOOLS_WORKSPACE:${user.home}/.golemcore/sandbox}
# Shell tool - command execution in sandboxed workspace
bot.tools.shell.enabled=${SHELL_TOOL_ENABLED:true}
bot.tools.shell.workspace=${TOOLS_WORKSPACE:${user.home}/.golemcore/sandbox}
bot.tools.shell.default-timeout=${SHELL_DEFAULT_TIMEOUT:30}
bot.tools.shell.max-timeout=${SHELL_MAX_TIMEOUT:300}
bot.tools.shell.allowed-env-vars=${SHELL_ALLOWED_ENV_VARS:}
# Skill management tool - create/list/delete skills via LLM
bot.tools.skill-management.enabled=${SKILL_MANAGEMENT_TOOL_ENABLED:true}
# Skill transition tool - allows LLM to transition between skills in a pipeline
bot.tools.skill-transition.enabled=${SKILL_TRANSITION_TOOL_ENABLED:true}
# Tier tool - allows LLM to switch model tier
bot.tools.tier.enabled=${TIER_TOOL_ENABLED:true}
# Brave Search tool - web search via Brave Search API (free: 2000 queries/month)
bot.tools.brave-search.enabled=${BRAVE_SEARCH_ENABLED:false}
bot.tools.brave-search.api-key=${BRAVE_SEARCH_API_KEY:}
bot.tools.brave-search.default-count=${BRAVE_SEARCH_DEFAULT_COUNT:5}

# ===== IMAP (Email Reading) =====
bot.tools.imap.enabled=${IMAP_TOOL_ENABLED:false}
bot.tools.imap.host=${MAIL_IMAP_HOST:}
bot.tools.imap.port=${MAIL_IMAP_PORT:993}
bot.tools.imap.username=${MAIL_IMAP_USERNAME:}
bot.tools.imap.password=${MAIL_IMAP_PASSWORD:}
bot.tools.imap.security=${MAIL_IMAP_SECURITY:ssl}
bot.tools.imap.ssl-trust=${MAIL_IMAP_SSL_TRUST:}
bot.tools.imap.connect-timeout=${MAIL_IMAP_CONNECT_TIMEOUT:10000}
bot.tools.imap.read-timeout=${MAIL_IMAP_READ_TIMEOUT:30000}
bot.tools.imap.max-body-length=${MAIL_IMAP_MAX_BODY_LENGTH:50000}
bot.tools.imap.default-message-limit=${MAIL_IMAP_DEFAULT_MESSAGE_LIMIT:20}

# ===== SMTP (Email Sending) =====
bot.tools.smtp.enabled=${SMTP_TOOL_ENABLED:false}
bot.tools.smtp.host=${MAIL_SMTP_HOST:}
bot.tools.smtp.port=${MAIL_SMTP_PORT:587}
bot.tools.smtp.username=${MAIL_SMTP_USERNAME:}
bot.tools.smtp.password=${MAIL_SMTP_PASSWORD:}
bot.tools.smtp.security=${MAIL_SMTP_SECURITY:starttls}
bot.tools.smtp.ssl-trust=${MAIL_SMTP_SSL_TRUST:}
bot.tools.smtp.connect-timeout=${MAIL_SMTP_CONNECT_TIMEOUT:10000}
bot.tools.smtp.read-timeout=${MAIL_SMTP_READ_TIMEOUT:30000}

# ===== MCP CLIENT (Model Context Protocol) =====
bot.mcp.enabled=${MCP_ENABLED:true}
bot.mcp.default-startup-timeout=${BOT_MCP_DEFAULT_STARTUP_TIMEOUT:30}
bot.mcp.default-idle-timeout=${BOT_MCP_DEFAULT_IDLE_TIMEOUT:5}

# ===== RAG (LightRAG) =====
bot.rag.enabled=${RAG_ENABLED:false}
bot.rag.url=${RAG_URL:http://localhost:9621}
bot.rag.api-key=${RAG_API_KEY:}
bot.rag.query-mode=${BOT_RAG_QUERY_MODE:hybrid}
bot.rag.max-context-tokens=${BOT_RAG_MAX_CONTEXT_TOKENS:2000}
bot.rag.timeout-seconds=${BOT_RAG_TIMEOUT_SECONDS:10}
bot.rag.index-min-length=${BOT_RAG_INDEX_MIN_LENGTH:50}

# ===== AUTO MODE =====
bot.auto.enabled=${AUTO_MODE_ENABLED:false}
bot.auto.tick-interval-seconds=${AUTO_MODE_TICK_INTERVAL:30}
bot.auto.task-timeout-minutes=${AUTO_MODE_TASK_TIMEOUT:10}
bot.auto.auto-start=${AUTO_MODE_AUTO_START:true}
bot.auto.max-goals=${BOT_AUTO_MAX_GOALS:3}
bot.auto.model-tier=${BOT_AUTO_MODEL_TIER:default}
bot.auto.notify-milestones=${BOT_AUTO_NOTIFY_MILESTONES:true}
bot.auto.max-diary-entries-in-context=${BOT_AUTO_MAX_DIARY_ENTRIES_IN_CONTEXT:10}
bot.auto.max-tasks-per-goal=${BOT_AUTO_MAX_TASKS_PER_GOAL:20}
# Goal management tool
bot.tools.goal-management.enabled=${GOAL_MANAGEMENT_TOOL_ENABLED:true}

# ===== AUTO COMPACT (automatic context compaction) =====
bot.auto-compact.enabled=${BOT_AUTO_COMPACT_ENABLED:true}
bot.auto-compact.max-context-tokens=${BOT_AUTO_COMPACT_MAX_CONTEXT_TOKENS:50000}
bot.auto-compact.keep-last-messages=${BOT_AUTO_COMPACT_KEEP_LAST_MESSAGES:20}
bot.auto-compact.system-prompt-overhead-tokens=${BOT_AUTO_COMPACT_SYSTEM_PROMPT_OVERHEAD_TOKENS:8000}
bot.auto-compact.chars-per-token=${BOT_AUTO_COMPACT_CHARS_PER_TOKEN:3.5}
bot.auto-compact.max-tool-result-chars=${BOT_AUTO_COMPACT_MAX_TOOL_RESULT_CHARS:100000}

# ===== PLAN MODE =====
bot.plan.enabled=${PLAN_MODE_ENABLED:false}
bot.plan.max-plans=${BOT_PLAN_MAX_PLANS:5}
bot.plan.max-steps-per-plan=${BOT_PLAN_MAX_STEPS:50}
bot.plan.stop-on-failure=${BOT_PLAN_STOP_ON_FAILURE:true}
bot.plan.default-model-tier=${BOT_PLAN_DEFAULT_MODEL_TIER:smart}

# ===== PROMPTS (system prompt sections) =====
bot.prompts.enabled=${BOT_PROMPTS_ENABLED:true}
bot.prompts.bot-name=${BOT_NAME:AI Assistant}

# ===== VOICE (ElevenLabs STT + TTS) =====
bot.voice.enabled=${VOICE_ENABLED:false}
bot.voice.api-key=${ELEVENLABS_API_KEY:}
bot.voice.voice-id=${ELEVENLABS_VOICE_ID:21m00Tcm4TlvDq8ikWAM}
bot.voice.tts-model-id=${ELEVENLABS_TTS_MODEL:eleven_multilingual_v2}
bot.voice.stt-model-id=${ELEVENLABS_STT_MODEL:scribe_v1}
bot.voice.speed=${ELEVENLABS_SPEED:1.0}
# Telegram voice
bot.voice.telegram.respond-with-voice=${BOT_VOICE_TELEGRAM_RESPOND_WITH_VOICE:true}
bot.voice.telegram.transcribe-incoming=${BOT_VOICE_TELEGRAM_TRANSCRIBE_INCOMING:true}


# ToolLoopSystem
bot.tool-loop.max-llm-calls=${BOT_TOOL_LOOP_MAX_LLM_CALLS:6}
bot.tool-loop.max-tool-executions=${BOT_TOOL_LOOP_MAX_TOOL_EXECUTIONS:50}
bot.tool-loop.deadline-ms=${BOT_TOOL_LOOP_DEADLINE_MS:30000}
bot.tool-loop.stop-on-tool-failure=${BOT_TOOL_LOOP_STOP_ON_TOOL_FAILURE:false}
bot.tool-loop.stop-on-confirmation-denied=${BOT_TOOL_LOOP_STOP_ON_CONFIRMATION_DENIED:true}
bot.tool-loop.stop-on-tool-policy-denied=${BOT_TOOL_LOOP_STOP_ON_TOOL_POLICY_DENIED:false}
